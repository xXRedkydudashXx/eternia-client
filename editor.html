<!doctype html>
<html lang="en" id="mainBody">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Ubuntu:400,700" rel="stylesheet">
<style type="text/css">
    :root {
        --titleTextColor: #b3b1ad;
        --backgroundColor: #0a0e14;
        --font: Ubuntu;
    }

    * {
        font-family: Ubuntu;
      margin: 0
    }

  html, body{
    height: 100%;
  }
    body {
        background-color: var(--backgroundColor);
        font-size: 20px;
    }

    h1 {
        text-align: center;
        color: var(--titleTextColor);
    }
  .CodeMirror{
    font-size: 14px;
    height: 90% !important;
  }
</style>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Eternia-io Entity Editor</title>
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name="description"
        content="Woomy Arras.io: A fan-made clone of diep.io, and an unofficial sequel to arras.io! Along with over 1.7k tanks, this server contains some very interesting additions...">
    <meta name="robots" content="index, follow">
    <meta property="og:image" content="./resources/favicon-66x66-k.png" />
    <meta property="og:image:width" content="52" />
    <meta property="og:image:height" content="52" />
    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/resources/favicon-66x66-k.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/resources/favicon-66x66-k.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/resources/favicon-66x66-k.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/resources/favicon-66x66-k.png">
    <meta name="theme-color" content="#8ABC3F">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/cobalt.min.css">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/javascript/javascript.min.js"></script>
</head>

<body>
    <button id="apply">Apply Changes</button>
    <div class="editor"></div>
    <script defer>
        // Create our text editor
        const javascriptEditor = CodeMirror(document.querySelector(".editor"), {
            lineNumbers: true,
            tabSize: 4,
            mode: "javascript",
            indentUnit: 4,
            indentWithTabs: true
        });
        javascriptEditor.setOption("theme", "cobalt");
      
        // Apply defaults
        javascriptEditor.setValue("defExports.basic = {\n    PARENT: [defExports.genericTank],\n    LABEL: 'Basic',\n    DANGER: 4,\n    LEVEL: -1,\n    RESET_UPGRADES: true,\n    SKILL: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    SKILL_CAP: [9, 9, 9, 9, 9, 9, 9, 9, 9, 9],\n    GUNS: [{\n        POSITION: [18, 8, 1, 0, 0, 0, 0],\n        PROPERTIES: {\n            SHOOT_SETTINGS: combineStats([g.basic, g.less_pen]),\n            TYPE: defExports.bullet,\n            LABEL: '',\n            STAT_CALCULATOR: 0,\n            WAIT_TO_CYCLE: false,\n            AUTOFIRE: false,\n            SYNCS_SKILLS: false,\n            MAX_CHILDREN: 0,\n            ALT_FIRE: false,\n            NEGATIVE_RECOIL: false,\n            COLOR: 16,\n            SKIN: 0\n        }\n    }],\n    DAMAGE_CLASS: 2,\n    CAN_BE_ON_LEADERBOARD: true,\n    DIES_TO_TEAM_BASE: true,\n    MOTION_TYPE: 'motor',\n    IS_SMASHER: false,\n    ON_DEFINED: (me) => {\n        if (c.serverName.includes(\"Sandbox\")){\n            me.upgrades.push({\n                class: \"testbed_beta\",\n                level: 60,\n                index: Class.testbed_beta.index,\n                tier: 4\n            });\n            me.upgrades.push({\n                class: \"observer\",\n                level: 60,\n                index: Class.observer.index,\n                tier: 4\n            });\n        } \n    }\n};")
        document.getElementById("apply").onclick = function(){
          window.opener.sendMockupEdit(javascriptEditor.getValue())
        }
    </script>
</body>
</html>