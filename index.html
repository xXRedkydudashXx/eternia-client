
<!doctype html>
<html lang="en" id="mainBody">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nabla&family=Rubik+80s+Fade&family=Alfa+Slab+One&family=Bebas+Neue&family=Bungee&family=Cutive+Mono&family=Dancing+Script:wght@500&family=Fredoka+One&family=Indie+Flower&family=Merienda&family=Nanum+Brush+Script&family=Neonderthaw&family=Pacifico&family=Passion+One&family=Permanent+Marker&family=Rampart+One&family=Roboto+Mono:wght@500&family=Share+Tech+Mono&family=Syne+Mono&family=Ubuntu:wght@400;700&family=Zen+Dots&display=swap" rel="stylesheet">
<style type="text/css">
    body {
        overflow: hidden;
    }
</style>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <title>Eternia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name="description"  content="Woomy, But With More Stuff, Lol.">
    <meta name="robots" content="index, follow">
    <meta name="keywords" content=".io, arras, arras.io, arrasio, fun game, game, io game, online game, oxyrex, private server, tank game, woomy, woomy arras, woomy arras io, woomy io, woomy-arras, woomy-arras io, woomy-arras.io, woomy.arras.io, woomy.io, woomyio, eternia, Eternia, eternia-io, Eternia-io, eternia.io">
    <meta property="og:image" content="https://cdn.glitch.global/7abaa4bd-1e76-4521-b94e-1afe4e5913d3/eternia.png?v=1732833951488" />
    <meta property="og:image:width" content="52" />
    <meta property="og:image:height" content="52" />
    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="192x192" href="./resources/eternia.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./resources/eternia.png">
    <link rel="icon" type="image/png" sizes="96x96" href="./resources/eternia.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./resources/eternia.png">
    <meta name="theme-color" content="#8ABC3F">
    
    <script src="./multiplayer.js"></script>
    <script>
        const isLocal = true//window.location.hostname === "localhost";
        const isBeta = window.location.hostname === "beta.woomy.app";
        const isEvent = window.location.hostname === "event.woomy.app";
    </script>
    <script src="./app.js" defer></script>
    <link rel="stylesheet" href="./menu.css">
    <!-- Eval packet thing-->
    <script>
        const $a = (Math.random() * 9000000 | 0) + 1000000;
        const $b = (Math.random() * 9000000 | 0) + 1000000;
        const $c = (Math.random() * 9000000 | 0) + 1000000;
        const $d = (Math.random() * 9000000 | 0) + 1000000;
        const $e = (Math.random() * 9000000 | 0) + 1000000;
        Object.defineProperty(window, "_$a", {
            get() {
                return $a;
            },
            set() {
                return $a;
            }
        });
        Object.defineProperty(window, "_$b", {
            get() {
                return $b;
            },
            set() {
                return $b;
            }
        });
        Object.defineProperty(window, "_$c", {
            get() {
                return $c;
            },
            set() {
                return $c;
            }
        });
        Object.defineProperty(window, "_$d", {
            get() {
                return $d;
            },
            set() {
                return $d;
            }
        });
        Object.defineProperty(window, "_$e", {
            get() {
                return $e;
            },
            set() {
                return $e;
            }
        });
    </script>
</head>

<body oncontextmenu="return false;" id="mainBody">
    <div id="loadingScreen" style="display:flex;position: absolute;z-index: 100000;background: black;color: white;width: 100%;height: 100%;justify-content: center;flex-direction: column;">
      <h1 id="loadingText"  style="color:white;font-size:xxx-large;">
        Loading Files...
      </h1>
      <h5 style="color:white;font-size:xx-small;">
          Welcome To Eternia!
      </h5>
    </div>
    <script>
      
      let loadingMenu = document.getElementById("loadingScreen")
      let loadingText = document.getElementById("loadingText")
      let dotCounter = 0
      let loadingMenuInterval = setInterval(()=>{
        dotCounter++
        
        let str = ""
        
        let text = "";
        if(window.connectedToWRM !== true){
          text = "Connecting..."
        }
        
        if(dotCounter === text.length) dotCounter = 0
        for(let i = 0; i < text.length; i++){
          if(dotCounter === i){
            str += `<i style="color:white;font-size:xxx-large;">${text[i]}</i>`
            continue;
          }
          str += text[i]
        }
        loadingText.innerHTML = str
        if(window.connectedToWRM){
          loadingMenu.remove()
          clearInterval(loadingMenuInterval)
        }
      }, 100)
    </script>
    <div class="background"></div>
    <div id="gameAreaWrapper">
        <canvas id="gameCanvas" tabindex="1"></canvas>
    </div>
    <div id="wrapperWrapper">
        <div id="mainWrapper">
            <div id="startMenuWrapper">
                <div id="startMenu">
                    <!-- <div class="startMenuHolder" style="padding-right: 18px;">
                        <iframe onclick="window.open('https://discord.gg/ZkB7eD6WJG');"
                            src="https://discord.com/widget?id=1256192698625298453&theme=dark"
                            style="width: 100%; height: 90%;" allowtransparency="true" frameborder="0"></iframe>
                        <div class="bottomHolder">
                            <a style="background: #2bab2f; width: 25%" href="javascript:void(0)"
                                onclick="displayAchievements()">Achievements</a>
                            <a style="background: #3e5f85; width: 25%" href="https://woomy-online.glitch.me" target="_blank">Base Site</a>
                            <a class="patreon" href="/itiswhatitis.html" target="_blank">Special Thanks</a>
                            <!--<a style="background: #5571d7; width: 105px" href="javascript:void(0)" onclick="displayMission()">Mission</a>-->
                            <!--<a style="background: #c53333; width: 105px" href="javascript:void(0)" onclick="displayDisclaimer()">Disclaimer</a>
                        </div>
                    </div>-->
                    <div class="startMenuHolder">
                        <div class="sliderHolder">
                            <div class="slider" id="startMenuSlidingContent">
                                <center><a href="//eternia-io.glitch.me/" tabindex="-1"><img class="icon"
                                            src="./resources/eternia.png" alt="Eternia" /></a></center>
                                <h1>Eternia</h1>
                                <div id="serverFilterHolder" class="serverSelectorFilters">
                                    <button class="selectedButton" id="serverfilter_auto">Create Room</button>
                                    <button id="serverfilter_manual">Join Room</button>
                                </div>
                                <div class="serverSelectorSearch">
                                  <input placeholder="Search" id="serverSearch">
                                </div>
                                <div class="serverSelector shadowScroll">
                                    <table>
                                        <tbody id="serverSelector"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="slider" id="startMenuSlidingContent"><br>
                                <div class="keybindHolder shadowScroll" style="scroll-margin: 200px;">
                                    <table class="optionstable">
                                        <tr>
                                            <td>
                                                <div class="bottomHolder" style="display: flex; justify-content: center;"><a
                                                        style="background: #9377a9; width: 110px; margin: 0px;"
                                                        href="javascript:void(0)" onclick="displayHowToPlay()">How to
                                                        play</a>
                                                </div>
                                            </td>
                                          <td>
                                              <div class="bottomHolder" style="display: flex; justify-content: center;">      
                                              <a 
                                                 style="background: #9377a9; width: 110px; margin: 0px;" 
                                                 href="javascript:void(0)"
                                                  onclick="displayAchievements()">Achievements</a>
                                              </div>
                                          </td>
                                            <td>
                                                <div class="bottomHolder" style="display: flex; justify-content: center;"><a
                                                        style="background: #9377a9; width: 110px; margin: 0px;"
                                                        href="javascript:void(0)" onclick="displayAbout()">About Eternia</a>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                                    <hr>
                                    <optionsheader>Miscellaneous Controls:</optionsheader>
                                    <table class="optionsTable">
                                        <tr>
                                            <td><b>E</b>: Autofire</td>
                                            <td><b>C</b>: Autospin</td>
                                        </tr>
                                        <tr>
                                            <td><b>Q</b>: Transform</td>
                                            <td><b>M</b>: Max Stat</td>
                                        </tr>
                                        <tr>
                                            <td><b>←&→</b>: Pan Tree</td>
                                            <td><b>U</b>: Upgrade Tree</td>
                                        </tr>
                                        <tr>
                                            <td><b>N</b>: Level Up</td>
                                            <td><b>R</b>: Override</td>
                                        </tr>
                                    </table>
                                    <br>
                                    <hr>
                                    <optionsheader>Beta Tester Controls:</optionsheader>
                                    <table class="optionsTable">
                                        <tr>
                                            <td><b>+</b>: Rainbow</td>
                                            <td><b>X</b>: Passive</td>
                                        </tr>
                                        <tr>
                                            <td><b>`</b>: Testbed</td>
                                            <td><b>Y</b>: Reset Color</td>
                                        </tr>
                                        <tr>
                                            <td><b>K</b>: Suicide</td>
                                            <td><b>L</b>: Debug Info</td>
                                        </tr>
                                    </table>
                                    <br>
                                    <hr>
                                    <optionsheader>Developer Controls:</optionsheader>
                                    <table class="optionsTable">
                                        <tr>
                                            <td><b>Z</b>: Drag</td>
                                            <td><b>F</b>: Spawn</td>
                                        </tr>
                                        <tr>
                                            <td><b>T</b>: Teleport</td>
                                            <td><b>B</b>: Ran Color</td>
                                        </tr>
                                        <tr>
                                            <td><b>G</b>: Kill</td>
                                            <td><b>J</b>: Stealth</td>
                                        </tr>
                                        <tr>
                                            <td><b>;</b>: Godmode</td>
                                            <td><b>\</b>: Tank</td>
                                        </tr>
                                    </table>
                                    <hr>
                                </div>
                                <optionsheader>To change settings, click the gear on the top left</optionsheader>
                                <hr>
                                <optionsheader>Miscellaneous Links</optionsheader>
                                <div style="overflow-x: auto; white-space: nowrap;">
                                    <table class="optionstable">
                                        <tr>
                                            <td>
                                                <div class="bottomHolder" style="display: flex; justify-content: center;"><a
                                                        style="background: #9377a9; width: 110px; margin: 0px;"
                                                        href="https://discord.gg/ZkB7eD6WJG" onclick="javascript:void(0)">Discord</a>
                                                </div>
                                            </td>
                                          <td>
                                              <div class="bottomHolder" style="display: flex; justify-content: center;">      
                                              <a 
                                                 style="background: #9377a9; width: 110px; margin: 0px;" 
                                                 href="https://docs.google.com/presentation/d/1L195HxbO96sBxhv3u9z392rB_g6COcLKsfy3pcRzUnE/edit#slide=id.g2ce5a4cf3d6_2_45"
                                                  onclick="javascript:void(0)">Modding Tutorial</a>
                                              </div>
                                          </td>
                                            <td>
                                                <div class="bottomHolder" style="display: flex; justify-content: center;"><a
                                                        style="background: #9377a9; width: 110px; margin: 0px;"
                                                        href="https://docs.google.com/presentation/d/1KbOnOLrlFiZ7fsDHrty-_G8942sUj1sm/edit" onclick="javascript:void(0)">Doom's Concepts</a>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="bottomHolder" style="display: flex; justify-content: center;"><a
                                                        style="background: #9377a9; width: 110px; margin: 0px;"
                                                        href="https://astrolith.neocities.org" onclick="javascript:void(0)">Astrolith</a>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="bottomHolder" style="display: flex; justify-content: center;"><a
                                                        style="background: #9377a9; width: 110px; margin: 0px;"
                                                        href="https://nuclewar.glitch.me" onclick="javascript:void(0)">Nuclewar</a>
                                                </div>
                                            </td>
                                        </tr>
                                    </table>
                              </div>
                            </div>
                        </div>
                        <div class="menuInputHolder">
                            <input type="text" autofocus tabindex="1" spellcheck="false" placeholder="This is the tale of:"
                                id="playerNameInput" maxlength="24" />
                            <input type="password" autofocus tabindex="1" spellcheck="false" placeholder="Token"
                                  id="playerToken" hidden/>
                            <div>
                                <button id="startButton" tabindex="2">Play</button>
                            </div>
                            <div id="startMenuSlidingTrigger">
                                <h3 class="nopadding">Extra Stuff</h3>
                            </div>
                        </div>
                    </div>
                    <!--<div class="startMenuHolder" allowtransparency="true">
                                <iframe id="patchNotesIFrame" seamless="seamless" frameborder="0"
                                    onload="if(!this.src)this.src='./changelog.html?a='+Date.now()">Patch notes should go here. If you see this message, then something went wrong!</iframe>
                            </div>-->
                    <div class="startMenuHolder shadowScroll" id="patchHolder" style="padding-left: 18px;">
                    </div>
                    <script>
                        void async function () {
                            document.getElementById("patchHolder").innerHTML = ((await (await fetch("./changelog.html")).text()).replaceAll("." + "/", "./"));
                        }()
                    </script>
                </div>
            </div>
    
            <div class="popup" style="display: none;">
                <h1>Title</h1>
                <span>Message</span><br />
                <div>
                    <button onclick="document.querySelector('.popup').style.display = 'none';">Close</button>
                </div>
            </div>
            <div class="achievementsHolder" id="achievementsHolder">
                <div id="achievementsClose"
                    onclick="document.getElementsByClassName('achievementsHolder')[0].style.display = 'none'"></div>
                <h1 id="achievementsHeader">Achievements</h1>
                <hr>
                <div id="achievementsDisplay" class="shadowScroll"></div>
                <h1>Player Stats</h1>
                <hr>
                <table id="achievementsStatsTable"></table>
            </div>
        </div>
        <div class="signInDiv" id="signInDiv">
            <button class="signInDiscord signInButton" id="signInButton"><img id="signInButtonImage" src="/resources/Discord.png"> <span id="signInButtonText">Eternia Discord</span></button>
            <button class="signInOut signInButton" id="signInOut" style="display: none;">Log out</button>
        </div>
    </div>
    
    <input type="password" id="specialRoomToken" placeholder="Special Room Token">

    <script>
        window.quickurl = "./";
    </script>
    <!-- Preloads.js -->
    <script defer>
        {
            (function () {
                try {
                    if (!["localhost", "", "woomy-arras.netlify.app", "woomy-arras.xyz", "www.woomy-arras.xyz", "development.woomy-arras.xyz", ".rivet.gg"].includes(location.hostname)) {
                        //    location.href = "https://woomy-arras.xyz/";
                    }

                    function loadFromStorage() {
                        return (localStorage.getItem("popups") || "").split(",");
                    }

                    window.markAsRead = function markAsRead(item) {
                        localStorage.setItem("popups", [...loadFromStorage(), item].join(","));
                    }

                    window.closePopup = function closePopup(item) {
                        document.getElementById("mainWrapper").removeChild(document.getElementById(item));
                    }

                    function postAlert(alert) {
                        if (loadFromStorage().includes(alert.name)) {
                            return;
                        }
                        console.log(alert);
                        const popup = document.createElement("div");
                        popup.classList.add("popup");
                        popup.id = alert.name;
                        popup.innerHTML += `<span>${alert.title}</span><br/>${alert.text}<br/><button onclick="closePopup('${alert.name}');">Close</button><button onclick="markAsRead('${alert.name}');closePopup('${alert.name}');">Mark As Read</button><br/><span class="small">${new Date(alert.timeStamp)}</span>`;
                        document.getElementById("mainWrapper").appendChild(popup);
                    }
                    //fetch("//pine-mint-smartphone.glitch.me/announcements.json").then(r => r.json()).then(json => json.announcements.forEach(postAlert));

                    // Do screen size adjustment
                    let element = document.getElementById("mainWrapper");
                    let scalval = 130; ///Android|webOS|iPhone|iPad|iPod|BlackBerry|android|mobi/i.test(navigator.userAgent) ? 150 : 120;
                    function adjust() {
                        if (navigator.userAgent.search("Firefox") === -1) element.style.zoom = `${Math.round(Math.min(window.innerWidth / 1920, window.innerHeight / 1080) * scalval)}%`;
                    }
                    setInterval(adjust, 25);
                    adjust();

                    // Load ads
                    (adsbygoogle = window.adsbygoogle || []).push({});
                } catch (e) {
                    console.log("Error with preloads!");
                    console.error(e)
                }

                // Load ad
                const googleAdUrl = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js'
                try {
                    fetch(new Request(googleAdUrl)).catch(_ => window.adBlockEnabled = true)
                } catch (e) {
                    window.adBlockEnabled = true
                }

                let adInterval = setInterval(() => {
                    let adBox = document.getElementById("bottomPageAd")
                    if (!adBox) {
                        clearInterval(adInterval)
                        return
                    }
                    if (adBox.getAttribute("data-ad-status") !== "filled" || adBox.getAttribute("data-ad-status") !== "done") {
                        adBox.style.backgroundImage = "url('./resources/ULTRAKILL.gif')"
                        adBox.title = "Advertisement"
                        adBox.onclick = () => {
                            window.open("https://store.steampowered.com/app/1229490/ULTRAKILL/", "_blank")
                        }
                    } else {
                        adBox.style.backgroundImage = ""
                        adBox.style.onclick = () => { }
                        clearInterval(adInterval)
                        return
                    }
                }, 300)

                /// Discord sign in ///
                // Register token
                let code = new URLSearchParams(window.location.search).get("code")
                if (code) {
                    localStorage.setItem("discordCode", code);
                    window.location.replace(isLocal ? "http://localhost:3001" : isBeta ? "https://beta.woomy.app" : isEvent ? "https://event.woomy.app" : "https://woomy.app/")
                    return;
                }

                // Button onclicks
                document.getElementById("signInButton").onclick = () => {
                            window.open("https://discord.gg/ZkB7eD6WJG", "_blank")
                        }//window.location.href = ("https://discord.com/api/oauth2/authorize?client_id=1116884853967814676&redirect_uri=https%3A%2F%2Fwoomy-api.glitch.me%2FdiscordOauth&response_type=code&scope=identify")
                document.getElementById("signInOut").onclick = () => {
                    localStorage.removeItem("discordCode")
                    window.location.reload()
                }

                // Do the sign in if its saved
                let savedCode = localStorage.getItem("discordCode")
                if (savedCode) {
                    fetch("https://discord.com/api/v10/users/@me", {
                        headers: {
                            Authorization: "Bearer " + savedCode,
                        },
                    }).then((res) => res.json()).then((userData) => {
                        if (userData.code != undefined) {
                            localStorage.removeItem("discordCode")
                            window.location.reload()
                            return
                        };
                        document.getElementById("signInButton").onclick = () => { }
                        document.getElementById("signInButtonImage").src = `https://cdn.discordapp.com/avatars/${userData.id}/${userData.avatar}`
                        document.getElementById("signInButtonText").innerHTML = userData.global_name
                        document.getElementById("signInOut").style.display = "initial"
                    }).catch(err => console.error(err))
                }


                window.servers = [
                    { rivetGamemode: "2dom.js", serverGamemode: "2 TDM Domination" },
                    <!--{ rivetGamemode: "2mot.json", serverGamemode: "2 TDM Mothership" }, -->
                    <!--{ rivetGamemode: "2tag.json", serverGamemode: "2 TDM Tag" }, -->
                    { rivetGamemode: "2tdmhell.json", serverGamemode: "2 TDM Heck" },
                    { rivetGamemode: "4dom.json", serverGamemode: "4 TDM Domination" },
                    <!--{ rivetGamemode: "4mot.json", serverGamemode: "4 TDM Mothership" }, -->
                    <!--{ rivetGamemode: "4tag.json", serverGamemode: "4 TDM Tag" }, -->
                    { rivetGamemode: "4tdm.json", serverGamemode: "4 TDM" },
                    { rivetGamemode: "scoreWar.js", serverGamemode: "Agglomeration" },
                    { rivetGamemode: "blackout4tdm.json", serverGamemode: "Blackout 4 TDM" },
                    { rivetGamemode: "boss.json", serverGamemode: "Boss Rush" },
                    { rivetGamemode: "cave.json", serverGamemode: "Cave" },
                    { rivetGamemode: "cavetdm.js", serverGamemode: "Cave TDM" },
                    { rivetGamemode: "blackoutcavetdm.js", serverGamemode: "Blackout Cave TDM" },
                    { rivetGamemode: "crptTanks.json", serverGamemode: "Corrupted Tanks" },
                    { rivetGamemode: "ffa.json", serverGamemode: "FFA" },
                    { rivetGamemode: "growth.json", serverGamemode: "Growth" },
                    { rivetGamemode: "hangout.js", serverGamemode: "Hangout" },
                    { rivetGamemode: "blackouthangout.js", serverGamemode: "Blackout Hangout" },
                    { rivetGamemode: "maze.js", serverGamemode: "Maze" },
                    { rivetGamemode: "maze2tdm.js", serverGamemode: "Maze 2TDM"},
                    { rivetGamemode: "maze4tdm.js", serverGamemode: "Maze 4TDM"},
                    <!--{ rivetGamemode: "mazetdm.js", serverGamemode: "Maze TDM" },-->
                    { rivetGamemode: "blackoutmazetdm.js", serverGamemode: "Blackout Maze 2 TDM" },
                    { rivetGamemode: "mmo.js", serverGamemode: "MMO" },
                    <!--{ rivetGamemode: "murica.json", serverGamemode: "Murica" }, -->
                    { rivetGamemode: "music.js", serverGamemode: "Music" },
                    <!--{ rivetGamemode: "p2mot.json", serverGamemode: "2 TDM Portal Mothership" }, -->
                    { rivetGamemode: "pffa.json", serverGamemode: "Portal FFA" },
                    { rivetGamemode: "sbx.json", serverGamemode: "Sandbox" },
                    { rivetGamemode: "siege.js", serverGamemode: "Siege"},
                    { rivetGamemode: "siegeAlt.js", serverGamemode: "Siege but Weird"},
                    { rivetGamemode: "siegeAttack.js", serverGamemode: "Siege Attack"},
                    { rivetGamemode: "siegeSurvival.js", serverGamemode: "Siege Survival" },
                    { rivetGamemode: "siegev2Blackout.js", serverGamemode: "Blackout Siege Survival"},
                    { rivetGamemode: "siegePlace.js", serverGamemode: "Siege Tower Defense"},
                    { rivetGamemode: "soccer.json", serverGamemode: "Soccer" },
                    { rivetGamemode: "space.json", serverGamemode: "Space" },
                    { rivetGamemode: "super2TDM.js", serverGamemode: "Super 2TDM" },
                    { rivetGamemode: "srvivl.json", serverGamemode: "Survival" },
                    { rivetGamemode: "tdm.js", serverGamemode: "TDM" },
                    { rivetGamemode: "testbed.json", serverGamemode: "Testbed Event" },
                    { rivetGamemode: "sb.js", serverGamemode: "The Shattered Beyond" },
                    <!--{ rivetGamemode: "tiki.json", serverGamemode: "Squidwards Tiki Island" },-->
                    { rivetGamemode: "vwalk.js", serverGamemode: "Void Walkers" },
                    { rivetGamemode: "blackoutvwalk.js", serverGamemode: "Blackout Void Walkers" },
                    { rivetGamemode: "doomwalk.js", serverGamemode: "The Doom Walk" },
                    { rivetGamemode: "custom.js", serverGamemode: "Custom" }
                ]
                window.preloadsDoneCooking = true
                /*(() => {
                    fetch("https://woomy-api.glitch.me/allServers").then(res => res.json()).then((data) => {
                        data = data.data
                        window.servers = data
                        fetch("https://matchmaker.api.rivet.gg/v1/lobbies/list", {}).then(res => res.json()).then((data) => {
                            window.lobbies = data.lobbies
                            window.preloadsDoneCooking = true
                        }).catch((err) => {
                            console.error(err)
                            alert("Failed to load servers, an update might have just released, you are getting rate limitted, or the rivet API is down. Please wait a bit and try reloading.")
                        })
                    }).catch((err) => {
                        console.error(err)
                        alert("Failed to find the servers, the woomy API might be down (let a developer know). But first, please try reloading the page!")
                    })
                })()*/

                // I like rivet, lets not ping the api for the offline ver, thx
                /*let interval = setInterval(async function () {
                    if (window.gameStarted) {
                        clearInterval(interval)
                        return
                    }
                    try {
                        await fetch("https://matchmaker.api.rivet.gg/v1/lobbies/list", {}).then(res => res.json()).then((data) => {
                            window.lobbies = data.lobbies
                        })
                    } catch (err) {}
                }, 15000)*/
            })();
        }
                async function getFullURL(data, ws) {
                    let res = null
                    if (ws) {
                        try {
                            if (!isLocal) {
                                let {
                                    RivetClient
                                } = await import("./rivet-api.js")
                                let client = new RivetClient({})
                                if (data[0]) {
                                    res = await client.matchmaker.lobbies.join({
                                        lobbyId: data[0]
                                    })
                                } else if (data[1].rivetGamemode !== undefined) {
                                    res = await client.matchmaker.lobbies.find({
                                        gameModes: [data[1].rivetGamemode]
                                    })
                                } else {
                                    alert("Error with preloading fullURL, rivet connection")
                                }
                            }
                            window.rivetLobby = isLocal ? "0" : res.lobby.lobbyId
                            window.rivetPlayerToken = isLocal ? "0" : res.player.token
                            window.rivetServerFound = true
                        } catch (err) {
                            console.error(err)
                            alert("The server you are trying to join is most likely full, you are at the ip limit, or an error occured, sorry! Please wait a bit then try again.")
                        }
                        return isLocal ? "ws://localhost:3001/?" : (`ws${window.location.protocol === "https:" ? "s" : ""}://${res.ports["default"].host}/?`)
                    } else {
                        return isLocal ? "http://localhost:3001/" : (`http${window.location.protocol === "https:" ? "s" : ""}://${window.location.hostname}${!window.location.port ? "/" : `:${window.location.port}/`}`);
                    }
                }
    </script>
    <!-- Menu.js -->
    <script defer>
        {
            const popup = document.querySelector(".popup");
            const popupTitle = popup.querySelector("h1");
            const popupMessage = popup.querySelector("span");

            function displayFirefoxSwitch() {
                popup.style.display = "block";
                popupTitle.textContent = "Dear Firefox User:";
                popupMessage.textContent = "We highly recommend that you do not play this game with the firefox browser. The game functions and performs much better on a Chromium based browser, such as Google Chrome, Opera GX or Microsoft Edge. You may play using Firefox, just be aware that multiple issues may manifest themselves.";
            }

            function displayCanvasNotSupported() {
                popup.style.display = "block";
                popupTitle.textContent = "Warning:";
                popupMessage.textContent = "Your browser does not support canvas. Please switch to a Chromium based browser, such as Google Chrome, Opera GX or Microsoft Edge.";
            }
            if (navigator.userAgent.search("Firefox") !== -1) {};


            function displayHowToPlay() {
                popup.style.display = "block";
                popupTitle.textContent = "How to play:";
                popupMessage.textContent = "Eternia has a wide range of different features and mechanics. The basics of movement involve using the WASD keys, which make your tank move around. You use your mouse to control where your target location is, which your tank will face torwards. To fire your tank, you can press down on the left button of your mouse. You can use E and C keys for AutoFire and AutoSpin. Your goal is to kill other players and AIs, while trying to keep your own tank alive. Killing entities in Woomy gives you score. People with the most score are shown on the leaderboard. Polygons (or Food) give score aswell. Most tanks that branch from the director branch work differently, as they have drones instead of bullets. Drones are controlled by holding down your mouse and using your cursor to control where they go to on your screen. You can also not hold down on the mouse button, to allow them to roam freely around you and protect you. Not all drones are controllable. There is alot more to this game, but I am running out of screenspace. Go ahead and play the game yourself and lets see what you discover.";
            }

            function displayAbout() {
                popup.style.display = "block";
                popupTitle.textContent = "About Eternia";
                popupMessage.textContent = "Eternia is A fan-made clone of woomy arras, with over 1k new tanks! not affiliated with any brand/company not affiliated with arras.io";
            }

            function displayAchievements() {
                document.getElementsByClassName('achievementsHolder')[0].style.display = 'block';
            };

            let canvas = document.createElement("canvas");
            if (!canvas || !canvas.getContext) displayCanvasNotSupported();
            if (canvas) canvas.remove();

            let clicked = 0;
            let div = document.getElementById("startMenuSlidingTrigger");
            let slide = document.getElementsByClassName("slider");
            div.addEventListener('click', function () {
                clicked = !clicked;
                for (let i = 0; i < slide.length; i++) slide[i].style.top = `${-280 * clicked}px`;
                if (clicked === 3) {
                    div.innerHTML = '<h3 class="nopadding">Extra Stuff</h3>';
                } else if (!clicked) {
                    div.innerHTML = '<h3 class="nopadding">Extra Stuff</h3>';
                } else {
                    div.innerHTML = '<h3 class="nopadding">Extra Stuff</h3>';
                };
            });

        }
    </script>
</body>
</html>